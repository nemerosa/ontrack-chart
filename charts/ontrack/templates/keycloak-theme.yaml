{{- if and .Values.auth.keycloak.enabled (not .Values.auth.keycloak.external.enabled)}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "ontrack.fullname" . }}-keycloak-theme
binaryData:
{{- $prefix := "files/themes/yontrack/" }}
{{- $files := .Files.Glob (printf "%s**" $prefix) }}
{{- range $path, $_ := $files }}
  {{ $path | trimPrefix $prefix | quote }}: {{ $.Files.GetBytes $path | toString | b64enc | quote }}
{{- end }}
{{- end }}
